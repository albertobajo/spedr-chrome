<html>
  <head>
    <style>
      #spedr-short-url {
        width: 220px;
        font-size: 0.8em;
        text-align: center;
        border: none;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript">
      chrome.tabs.getSelected(null, function(tab) {
        var tabUrl = tab.url;
        var tabId = tab.id;
                
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "http://spedr.com/post");
        xhr.onreadystatechange = function() {
          if (xhr.readyState == 4) {
            document.getElementById('spedr-short-url').value = xhr.responseText;
            document.getElementById('spedr-short-url').select();
          }
        }
                
        var data = new FormData();
        data.append("url", tabUrl);
        xhr.send(data);
      });
    </script>
    
    <input
      id="spedr-short-url"
      value=""
      onclick="this.select();"
      readonly="readonly"
    />
  </body>  
</html>